!function(m){var t=function(){return this||(1,eval)("this")},o=Object.prototype.hasOwnProperty,b=t();if(b.b5m&&b.b5m.host)return!1;var c=/cdn0[1234]\.b5mcdn/,e=m.split(".").reverse(),n={stage:1,prod:1,b5m:1,b5cai:1};b.b5m={},b5m.env=b._b5m_env_||e[1],b5m.env=b5m.env in n&&b5m.env||m,b5m.getHost=function(m,t){t&&new RegExp("b5m.com$").test((window.location||document.location).hostname)&&t.match(/stage|prod/)&&(t="");var o=Math.ceil(4*Math.random());return t=t||b5m.env,m=m.replace(c,"cdn0"+(o||1)+".b5mcdn"),t in{stage:1,prod:1}&&(m=m.replace(/\.b5m(cdn)?\./,"."+t+".")),"http"!==m.slice(0,4)&&(m="http://"+m),m},b5m.host={cdn:b5m.env in n&&"cdn01.b5mcdn.com"||b5m.env,www:"www.b5m.com",m:"m.b5m.com","k.m":"k.m.b5m.com",bhb:"bhb.b5m.com","cart.m":"cart.m.b5m.com",home:"home.b5m.com",ucenter:"ucenter.b5m.com",gc:"gc.b5m.com",s:"s.b5m.com",se:"se.b5m.com",detail:"detail.b5m.com",cart:"cart.b5m.com",pay:"pay.b5m.com",order:"order.b5m.com",vip:"vip.b5m.com",k:"www.b5m.com",fanli:"fanli.b5m.com",p:"p.b5m.com",t:"t.b5m.com",korea:"korea.b5m.com",hd:"hd.b5m.com",tejia:"tejia.b5m.com",bbs:"bbs.b5m.com",hysp:"hysp.b5m.com",act:"act.b5m.com",yq:"yq.b5m.com",traderate:"traderate.b5m.com",f:"f.b5m.com",rebate:"rebate.b5m.com",1:"1.b5m.com"},b5m.getInterface=function(t,b,c){var e;if(c=c||b5m.env,!(b||c in n)){for(e in t)o.call(t,e)&&(t[e]=b5m.getHost(m,b,c)+t[e]);return t}for(e in t)b5m.host[b]&&o.call(b5m.host,b)&&(t[e]=b5m.getHost(b5m.host[b],c)+t[e]);return t};for(var r in b5m.host)o.call(b5m.host,r)&&(b5m.host[r]=b5m.getHost(b5m.host[r]))}(function(){try{return location.host}catch(m){return"localhost"}}());
;"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,o,f,u,i=gap,p=e[t];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(t)),"function"==typeof rep&&(p=rep.call(e,t,p)),typeof p){case"string":return quote(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(p)){for(f=p.length,n=0;f>n;n+=1)u[n]=str(n,p)||"null";return o=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+i+"]":"["+u.join(",")+"]",gap=i,o}if(rep&&"object"==typeof rep)for(f=rep.length,n=0;f>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,p),o&&u.push(quote(r)+(gap?": ":":")+o));else for(r in p)Object.prototype.hasOwnProperty.call(p,r)&&(o=str(r,p),o&&u.push(quote(r)+(gap?": ":":")+o));return o=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+i+"}":"{"+u.join(",")+"}",gap=i,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(t,e){var n,r,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();
;!function(e,t){if(function(e){var t=Array.prototype,o=t.slice;e.console||(e.console={debug:!1,log:function(){this.debug&&alert(o.call(arguments))},dir:function(){if(this.debug){var e=o.call(arguments);for(var t in e)for(var i in e[t])alert([e[t],e[t][i],i])}}})}(e),function(){function t(e){var t,o=e.split("."),i=this;for(t=0;t<o.length;t++)"undefined"==typeof i[o[t]]&&(i[o[t]]={}),i=i[o[t]];return i}e.b5m=e.b5m||{},b5m.ui={},b5m.info={},b5m.namespace=function(e){return t.call(this,e)}}(),e.NS={man:function(t,o){if("string"==typeof t){t=t.split(".");for(var i=0,n=t.length-1,r=arguments.length,a=e.NS;t[i];)a[t[i]]=r>1&&i===n?o:a[t[i]]||{},a=a[t[i]],i++;return a}}},b5m.throttle=function(e,t,o){var i,n=null;return function(){var r=this,a=arguments,s=+new Date;clearTimeout(n),i||(i=s),s-i>=o?(e.apply(r,a),i=s):n=setTimeout(function(){e.apply(r,a)},t)}},e.Cookies={set:function(e,t){var o=arguments,i=arguments.length,n=i>2?o[2]:null,r=i>3?o[3]:"/",a=i>4?o[4]:null,s=i>5?o[5]:!1;document.cookie=e+"="+escape(t)+(null==n?"":"; expires="+n.toGMTString())+(null==r?"":"; path="+r)+(null==a?"":"; domain="+a)+(1==s?"; secure":"")},get:function(e){for(var t=e+"=",o=t.length,i=document.cookie.length,n=0,r=0;i>n;){if(r=n+o,document.cookie.substring(n,r)==t)return Cookies.getCookieVal(r);if(n=document.cookie.indexOf(" ",n)+1,0==n)break}return null},clear:function(e){if(Cookies.get(e)){var t=new Date;t.setTime(t.getTime()-864e5),Cookies.set(e,"",t)}},getCookieVal:function(e){var t=document.cookie.indexOf(";",e);return-1==t&&(t=document.cookie.length),unescape(document.cookie.substring(e,t))},setEn:function(e,t){var o=arguments,i=arguments.length,n=i>2?o[2]:null,r=i>3?o[3]:"/",a=i>4?o[4]:null,s=i>5?o[5]:!1;document.cookie=e+"="+encodeURI(t)+(null==n?"":"; expires="+n.toGMTString())+(null==r?"":"; path="+r)+(null==a?"":"; domain="+a)+(1==s?"; secure":"")},getEn:function(e){for(var t=e+"=",o=t.length,i=document.cookie.length,n=0,r=0;i>n;){if(r=n+o,document.cookie.substring(n,r)==t)return Cookies.getCookieValEn(r);if(n=document.cookie.indexOf(" ",n)+1,0==n)break}return null},clearEn:function(e){if(Cookies.get(e)){var t=new Date;t.setTime(t.getTime()-864e5),Cookies.set(e,"",t)}},getCookieValEn:function(e){var t=document.cookie.indexOf(";",e);return-1==t&&(t=document.cookie.length),decodeURI(document.cookie.substring(e,t))}},e.NS.man("functions.supportsCss3"),e.NS.functions.supportsCss3=function(){var t=document.createElement("div"),o="Khtml O Moz Webkit".split(" "),i=o.length;return function(n){if(e.ActiveXObject&&parseInt(navigator.userAgent.toLowerCase().match(/msie ([\d.]+)/)[1],10)<=8)return!1;if(n in t.style)return!0;if("-ms-"+n in t.style)return!0;for(n=n.replace(/^[a-z]/,function(e){return e.toUpperCase()});i--;)if(o[i]+n in t.style)return!0;return!1}}(),function(e){function o(e){var o={},i=/^jQuery\d+$/;return t.each(e.attributes,function(e,t){t.specified&&!i.test(t.name)&&(o[t.name]=t.value)}),o}function i(e,o){var i=this,n=t(i);if(i.value==n.attr("placeholder")&&n.hasClass(m.customClass))if(n.data("placeholder-password")){if(n=n.hide().nextAll('input[type="password"]:first').show().attr("id",n.removeAttr("id").data("placeholder-id")),e===!0)return n[0].value=o;n.focus()}else i.value="",n.removeClass(m.customClass),i==r()&&i.select()}function n(){var e,n=this,r=t(n),a=this.id;if(""===n.value){if("password"===n.type){if(!r.data("placeholder-textinput")){try{e=r.clone().attr({type:"text"})}catch(s){e=t("<input>").attr(t.extend(o(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":r,"placeholder-id":a}).bind("focus.placeholder",i),r.data({"placeholder-textinput":e,"placeholder-id":a}).before(e)}r=r.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",a).show()}r.addClass(m.customClass),r[0].value=r.attr("placeholder")}else r.removeClass(m.customClass)}function r(){try{return document.activeElement}catch(e){}}var a,s,c="[object OperaMini]"==Object.prototype.toString.call(e.operamini),l="placeholder"in document.createElement("input")&&!c,u="placeholder"in document.createElement("textarea")&&!c,d=t.valHooks,p=t.propHooks;if(l&&u)s=t.fn.placeholder=function(){return this},s.input=s.textarea=!0;else{var m={};s=t.fn.placeholder=function(e){var o={customClass:"placeholder"};m=t.extend({},o,e);var r=this;return r.filter((l?"textarea":":input")+"[placeholder]").not("."+m.customClass).bind({"focus.placeholder":i,"blur.placeholder":n}).data("placeholder-enabled",!0).trigger("blur.placeholder"),r},s.input=l,s.textarea=u,a={get:function(e){var o=t(e),i=o.data("placeholder-password");return i?i[0].value:o.data("placeholder-enabled")&&o.hasClass(m.customClass)?"":e.value},set:function(e,o){var a=t(e),s=a.data("placeholder-password");return s?s[0].value=o:a.data("placeholder-enabled")?(""===o?(e.value=o,e!=r()&&n.call(e)):a.hasClass(m.customClass)?i.call(e,!0,o)||(e.value=o):e.value=o,a):e.value=o}},l||(d.input=a,p.value=a),u||(d.textarea=a,p.value=a),t(function(){t(document).delegate("form","submit.placeholder",function(){var e=t("."+m.customClass,this).each(i);setTimeout(function(){e.each(n)},10)})}),t(e).bind("beforeunload.placeholder",function(){t("."+m.customClass).each(function(){this.value=""})})}t("input,textarea").placeholder({customClass:"b5m-placeholder"})}(e),function(){"use strict";function t(t){void 0===t&&(t=e.navigator.userAgent),t=t.toLowerCase();var o=/(edge)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],i=/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(windows phone)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[],n={},r={browser:o[5]||o[3]||o[1]||"",version:o[2]||o[4]||"0",versionNumber:o[4]||o[2]||"0",platform:i[0]||""};if(r.browser&&(n[r.browser]=!0,n.version=r.version,n.versionNumber=parseInt(r.versionNumber,10)),r.platform&&(n[r.platform]=!0),(n.android||n.bb||n.blackberry||n.ipad||n.iphone||n.ipod||n.kindle||n.playbook||n.silk||n["windows phone"])&&(n.mobile=!0),(n.cros||n.mac||n.linux||n.win)&&(n.desktop=!0),(n.chrome||n.opr||n.safari)&&(n.webkit=!0),n.rv||n.edge){var a="msie";r.browser=a,n[a]=!0}if(n.safari&&n.blackberry){var s="blackberry";r.browser=s,n[s]=!0}if(n.safari&&n.playbook){var c="playbook";r.browser=c,n[c]=!0}if(n.bb){var l="blackberry";r.browser=l,n[l]=!0}if(n.opr){var u="opera";r.browser=u,n[u]=!0}if(n.safari&&n.android){var d="android";r.browser=d,n[d]=!0}if(n.safari&&n.kindle){var p="kindle";r.browser=p,n[p]=!0}if(n.safari&&n.silk){var m="silk";r.browser=m,n[m]=!0}return n.name=r.browser,n.platform=r.platform,n}return e.jQBrowser=t(e.navigator.userAgent),e.jQBrowser.uaMatch=t,jQuery&&(jQuery.browser=e.jQBrowser),e.jQBrowser}(),e.NS.man("publics.tab"),e.NS.publics.tab=function(e,o,i,n,r,a,s){var c=function(e){for(var t="",o=e-1;o>=0;)t="<a "+(0==o?'class="cur"':"")+' href="javascript:void(0)">'+(o+1)+"</a>"+t,o--;return t};e.each(function(n){t(this).css("width",t(this).width()).addClass("slider-nav-fix"),t(this).on("mouseenter.tab",function(r){r.preventDefault(),i&&(e.filter("."+i).removeClass(i),t(this).addClass(i)),o.filter(":visible").scrollTop(0).stop().hide(),o.eq(n).hide().fadeIn(0),o.find("img").trigger("lazyload"),s&&(s.call(this,c(Math.ceil(o.eq(n).find("li").length/4))),t(this).trigger("callback"))}).find("a").on("click.tab",function(e){return e.preventDefault(),!1}),o.scrollTop(0)}).eq(0).trigger("mouseenter"),r&&r.length&&r.on("click",function(t){t.preventDefault();var o=e.filter(i?"."+i:":visible"),n=o.prev().length?o.prev():e.eq(-1);n.trigger("mouseenter.tab")}),a&&a.length&&a.on("click",function(t){t.preventDefault();var o=e.filter(i?"."+i:":visible"),n=e.index(o)<=e.length-2?o.next():e.eq(0);n.trigger("mouseenter.tab")})},t("#topbar").length&&(!function(){var o="http://chat.live800.com/live800/chatClient/chatbox.jsp?companyID=447850&",i={jid:7356334111,enterurl:location.href,info:"userId="+Cookies.get("token")+"&name=b5m&memo=",pagetitle:document.title,pagereferrer:document.referrer,firstEnterUrl:"http://www.b5m.com"+location.path+"companyID=447850&from=mascot&sn=",lan:"zh"},n=t.extend(!0,{configID:124837},i),r=t.extend(!0,{configID:125272},i),a="height=700,width=820,toolbar=no,menubar=no,titlebar=no";t(".b5m-feedback").on({click:function(){return e.open(o+t.param(n),"newwindow",a),!1}},".pop-consult").on({click:function(){return e.open(o+t.param(r),"newwindow",a),!1}},".pop-feedback")}(),function(){var e=t("#topbar .msg-list");t.ajax({type:"get",url:b5m.host.ucenter+"/user/message/data/list.htm",dataType:"jsonp",jsonp:"jsonpCallback",data:{currentPage:1,pageSize:3,channelType:1},async:!0,success:function(o){if(o.ok){var i=o.data;if(i.totalRecord&&i.records.length){t("h3",e).html("未读消息<em></em>"),t.each(o.data.msgTotalList,function(o,i){-1==i.type&&0!==i.count?(t(".b5m-msg").addClass("show-unread-msg"),t("h3 em",e).text(i.count)):-1==i.type&&t("h3 em",e).text(i.count)});var n=t(".list-content",e);t(i.records).each(function(e,t){if(t){var o;o=1==t.type||3==t.type?"<br />"+t.fromUrl:"",n.append('<li><a href="javascript:">'+(n.children().length+1)+"、"+t.title+"<br>"+t.content+o+"</a></li>")}})}else e.find(".list-content").hide().end().find("ul.hidden").show()}else e.find(".list-content").hide().end().find("ul.hidden").show()},error:function(){e.find(".list-content").hide().end().find("ul.hidden").show()}})}()),function(){var o=null,i=function(e,i,n){var r=t(".vip-dist p",n);if(!e)return!1;var a=function(e){var t=e/86400|0,o=e%86400/3600|0,i=e%86400%3600/60|0,n=e%86400%3600%60|0;return t+"天"+o+"时"+i+"分"+n+"秒"},s=+new Date/1e3|0;count_time=function(){o=setTimeout(function(){var e=+new Date/1e3|0;r.html("VIP倒计时：<em>"+a(i-(e-s))+"</em>"),o=setTimeout(arguments.callee,1e3)},0)},t(".user-menu",n).on({mouseenter:function(){count_time()},mouseleave:function(){clearTimeout(o)}})};b5m.ui.updateTopbarUserName=function(e){var o=t("#topbar");o.find(".login-icon,.b5m-login,.b5m-reg").hide().end().find(".user-menu").removeClass("hidden").end().find(".user-name").html(e+"<b>^</b>").end().find(".vip-dist b").text(e).end().find(".user-avatar img").attr("src",""!=Cookies.get("avatar")&&'""'!=Cookies.get("avatar")?Cookies.get("avatar"):"http://static-web.b5m.com/ucenter/img/avatar130.png")},b5m.ui.updateTopbar=function(){t(".b5m-msg").show(),b5m.ui.updateTopbarUserName(decodeURIComponent(Cookies.get("showname"))),b5m.ui.checkVIP()},b5m.ui.checkVIP=function(){var e=t("#topbar");t.ajax({type:"get",url:b5m.host.ucenter+"/option/user/data/getSimpleVIPInfo.htm",async:!0,dataType:"jsonp",jsonp:"jsonpCallback",data:{useCache:!0},success:function(o){o.ok?(i(!0,(o.data.endTime-o.data.systemTime)/1e3,e),t(".user-avatar .icon-vip").show()):(i(!1,0,e),t(".user-avatar .icon-vip").hide())}})},b5m.ui.topbar=function(){var o=t("#topbar .user-menu");b5m.ui.isULogin.isLogin(function(i){return i?void b5m.ui.updateTopbar():(o.parent().on("click",".login-icon",function(o){o.preventDefault();var i=t(this);e.location.href=b5m.host.ucenter+"/user/third/login/auth.htm?type="+(encodeURIComponent(i.data("type"))||"null")+"&refererUrl="+encodeURIComponent(location.href)+"&userMps="+(Cookies.get("_b5mtraffic")||"____")}),Cookies.set("login","false",new Date,"/",b5m.getHost(".b5m.com")),t(".b5m-msg").hide(),o.addClass("hidden"),!1)})}}(),b5m.ui.setPopService=function(o){var i=function(){if(e.seajs&&(t=jQuery.fn.window?jQuery:e.$.fn.window?e.$:null),!t)return console.log("jQuery pop service error!"),!1;var i=e._live800_id_||"k.b5m.com"===location.host&&"124920"||"124837",n="true"===Cookies.get("login")&&Cookies.get("showname")||"",r="http://www.b5m.com/event/xiaobang?&from=rightbar&configID="+i+"&sn="+encodeURIComponent(n);o.click(function(){var e=t("#pop-service");e.length<1&&(e=t('<div id="pop-service" style="width:510px;height:320px;"><iframe width="510px" height="320px" frameborder="0" scrolling=no frameborder="0" src="'+r+'"></iframe></div>'),e.appendTo(document.body),t.fn.window?e.window():require([b5m.getHost(b5m.host.cdn)+"/public/js/jquery-window.js"],function(){e.window(),e.window("show")})),t.fn.window&&e.window("show")})};if(e.seajs)seajs.use([b5m.getHost(b5m.host.cdn)+"/public/js/jquery-window.js"],i);else if(e.require)try{i()}catch(n){console.log("require mc service error")}},b5m.namespace("ui.setProductNum"),b5m.ui.setProductNum=function(){var e=0;t.ajax({url:b5m.host.cart+"/count.html",dataType:"jsonp",jsonp:"jsonpCallback",timeout:2e4,success:function(o){o&&100==o.code&&(e=o.data),t(".b5m-cart b").html(e),t(".bar-cart i").html(99>=e?e:"99+")},error:function(){t(".b5m-cart b").html(e)}})},b5m.namespace("ui.setRightExpCouponNum"),b5m.ui.setRightExpCouponNum=function(){var e=0;t("#right-bar .right-coupon .right-coupon-window-outer").html(""),t('<div class="coupon-window"><p class="right-coupon-section not-used"><a style="display:block;" class="right-coupon-link" target="_blank" href="'+b5m.host.home+'/user/coupon.html">您有<em></em>张优惠券可以使用</a></p><p class="right-coupon-section almost-expired"><a style="display:block;" class="right-coupon-link" target="_blank" href="'+b5m.host.home+'/user/coupon.html">有<em></em>张优惠券即将过期</a></p></div>').appendTo("#right-bar .right-coupon .right-coupon-window-outer"),t.ajax({url:b5m.host.ucenter+"/coupon/info/data/getExpiringCoupons.htm?userId="+Cookies.get("token")+"&pageNum=1&pageSize=5",dataType:"jsonp",jsonp:"jsonpCallback",timeout:2e4,success:function(o){o&&2e3==o.code&&(numberList=o.data,e=numberList.total),t(".right-coupon .right-coupon-window-outer .coupon-window .almost-expired em").html(e),0!=e&&t(".right-coupon .right-coupon-window-outer .coupon-window .almost-expired").children("em").html(e).css({display:"inline"})},error:function(){t(".right-coupon .right-coupon-window-outer").html("")}})},b5m.namespace("ui.setRightTotCouponNum"),b5m.ui.setRightTotCouponNum=function(){var e=0;t("#right-bar .right-coupon .right-coupon-window-outer").html(""),t('<div class="coupon-window"><p class="right-coupon-section not-used"><a style="display:block;" class="right-coupon-link" target="_blank" href="'+b5m.host.home+'/user/coupon.html">您有<em></em>张优惠券可以使用</a></p><p class="right-coupon-section almost-expired"><a style="display:block;" class="right-coupon-link" target="_blank" href="'+b5m.host.home+'/user/coupon.html">有<em></em>张优惠券即将过期</a></p></div>').appendTo("#right-bar .right-coupon .right-coupon-window-outer"),t.ajax({url:b5m.host.ucenter+"/coupon/info/data/getUserCouponCount.htm?userId="+Cookies.get("token")+"&couponKind=1",dataType:"jsonp",jsonp:"jsonpCallback",timeout:2e4,success:function(o){if(o&&0==o.code){totcouponobj=o.data;for(var i in totcouponobj)0==totcouponobj[i].usedStatus&&(e=totcouponobj[i].num)}t(".right-coupon .right-coupon-window-outer .coupon-window .not-used em").html(e),t(".right-coupon .left-tot-num").html(e).css({display:"block"}),0!=e&&(t(".right-coupon .right-coupon-window-outer .coupon-window .not-used").children("em").html(e).css({display:"inline"}),t(".right-coupon .left-tot-num").html(e).css({display:"block"}))},error:function(){t(".right-coupon .right-coupon-window-outer .coupon-window .not-used em").html(e)}})},b5m.ui.showMenu=function(){var o=t(".sort-all-tit"),i=t(".sort-all-menu-wrap");t(".sub_item").removeAttr("style"),"undefined"==typeof is_www_index_page&&(o.find(".menu-arrow").css("display","inline-block"),o.hover(function(){o.addClass("show-menu"),i.show()},function(){o.removeClass("show-menu"),i.hide()}),i.hover(function(){i.show()},function(){i.hide()})),i.on({mouseenter:function(){if(t(this).data("imgLoaded"))return!1;var e=this;try{if(!t.fn.lazyload&&!t.fn.imglazyload)throw new Error("img lazyload plugin not loaded");if(t("img",e).trigger("lazyload"),t("img",e).trigger("appear"),!t.fn.layout&&(/MSIE 7.0/.exec(navigator.userAgent)||7===document.documentMode))throw new Error("img lazyload failed")}catch(o){require.config({baseUrl:b5m.host.cdn,map:{"*":{css:"public/js/require-css.min"}}}),require(["public/js/jquery-lazyload"],function(){t("img[lazy-src]",i).lazyload({data_attribute:"lazy-src",effect:"fadeIn",skip_invisible:!1}),t("img[data-src]",i).lazyload({data_attribute:"data-src",effect:"fadeIn",skip_invisible:!1}),t("img",e).trigger("appear")})}t(e).data("imgLoaded",1)}},"#J_menu>li");var n="";t(".all-cate .source-list").on("click","a",function(){t(this).addClass("cur").siblings().removeClass("cur"),t(this).parent().siblings(".cur-source").find("span").text(t(this).text()),n=t(this).attr("data-source")}),t("#J_menu").on("click","a:not(.without_source)",function(){return n||""!==n?(e.open(t(this).attr("href")+(t(this).attr("href").indexOf("?")>-1?"&":"?")+"sources="+n),!1):void 0})},t.fn.setLinkByOs=function(e){var o=function(){var e=-1!=navigator.userAgent.indexOf("Windows",0)?1:0,t=-1!=navigator.userAgent.indexOf("mac",0)?1:0,o=-1!=navigator.userAgent.indexOf("Linux",0)?1:0,i=-1!=navigator.userAgent.indexOf("X11",0)?1:0;return e?os_type="windows":t?os_type="mac":o?os_type="lunix":i&&(os_type="unix"),os_type};return this.each(function(){t.fn.setLinkByOs.dft={windows:"",mac:"",linux:"",unix:""};var i=t.extend(t.fn.setLinkByOs.dft,e);t(this).attr("href",i[o()])})},b5m.namespace("ui.topHotKey"),b5m.ui.topHotKey={init:function(e){return e=e||b5m.host.se+"/api/hot_words.js?callback=define&v=",require([e+Math.random()],function(e){var o,i,n=e.market_activities,r=e.hot_searches,a="";for(o=0,i=n.length;i>o;o++)a+='<a target="_blank" style="color:red;" href="'+n[o].url+'">'+n[o].name+"</a>";for(o=0,i=r.length;i>o;o++)a+='<a target="_blank" href="'+r[o].url+'">'+r[o].name+"</a>";t("#header .b5m-hot").html(a)}),!1}},t(".b5m-hot").length){var o;t("#hot_words_for_bhb").val()&&(o=b5m.host.detail+"/api/hot_words.js?callback=define&v="),b5m.ui.topHotKey.init(o)}b5m.namespace("ui.isULogin"),b5m.ui.isULogin={showLoginBox:function(o){if(e.require){var i=t("#login-view");i.length||(i=t('<div id="login-view"><div class="login-loading"><img src="'+b5m.getHost(b5m.host.cdn)+'/common/img/loading.gif" alt="" /><br />正在加载...</div></div>'),i.appendTo(document.body).window({id:"login-pop-window"})),i.window("show"),require.config({baseUrl:b5m.host.cdn,map:{"*":{css:"public/js/require-css.min"}}}),require(["ucenter/tpl/login","ucenter/js/loginPop","public/js/ejs.min","public/js/validate","public/js/mailtip","css!ucenter/css/login-pop-window"],function(t,i){i.init({el:"#login-view",email:"",referer:e.referer||document.referrer,rootPath:b5m.host.ucenter,loginTpl:t,callback:o})})}else location.href=b5m.host.ucenter+"/?loginReferer="+encodeURIComponent(location.href)},isNoLogin:function(e){var o=this;b5m.ui.isULogin.isLogin(function(i){return i?void(t.isFunction(e)&&e()):(o.showLoginBox(e),!0)})},isLogin:function(e){var o=b5m.getInterface({loginStatus:"/user/getLoginStatus.htm"},"home");t.ajax({url:o.loginStatus,type:"get",dataType:"jsonp",jsonp:"jsonpCallback",success:function(o){if(o.ok){if(t.isFunction(e))return e(!0),!0}else if(t.isFunction(e))return e(!1),!1},error:function(e){console.log(e)}})}},t(function(){var e=b5m.getInterface({url:"/"},"cart"),o=b5m.getInterface({url:"/favorites/index.htm"},"ucenter"),i=b5m.host.k.split("//")[1]===location.host?'<li class="bar-item bar-item-cart"><a href="'+e.url+'"><div class="bar-item-logo bar-item-logo-cart"></div><div class="bar-item-txt bar-cart" data-mps="cart">购物车<i class="cart-number">-</i></div><div class="bar-item-tip" style="display: none"></div></a></li>':"",n='<div class="right-bar-bg"><div class="right-bar"><div class="bar-list-b"><ul class="bar-list"><li class="bar-item"><div class="bar-item-logo bar-item-logo-service"></div><div class="bar-item-txt"></div><div class="bar-item-tip right-xb" data-mps="PO1">小帮帮咨询</div></li><li class="bar-item"><div class="bar-item-logo bar-item-logo-weixin"></div><div class="bar-item-txt"></div><div class="bar-item-tip"><div class="bar-weixin-code"></div><p class="mobile-text-bg">关注享更多优惠信息</p></div></li>'+i+'<li class="bar-item"><div class="bar-item-logo bar-item-logo-collect"></div><div class="bar-item-txt"></div><a href="'+o.url+'"><div class="bar-item-tip">我的收藏</div></a></li><li class="bar-item"><div class="bar-item-logo bar-item-logo-code"></div><div class="bar-item-txt"></div><div class="bar-item-tip"><div class="bar-app-code"></div><p class="mobile-text-bg">下载APP 享更多优惠</p></div></li><li class="bar-item bar-item-top"><div class="bar-item-logo bar-item-logo-top"></div></li></ul></div></div></div>';t("body").append(n),function(){var e=t(".bar-item-logo-top");e.on("click",function(e){e.preventDefault(),t("html,body").animate({scrollTop:0},function(){})}),b5m.ui.setProductNum(),b5m.ui.setPopService(t(".right-xb"))}()}),function(){if(b5m.host.home.split("//")[1]===location.host||b5m.host.ucenter.split("//")[1]===location.host){var e=t('<div id="right-wechat-bar" class="right-wechat-bar" data-mps="#"></div>'),o=t('<div class="right-wechat-barcode" target="_self" href="javascript:void(0);" ><span class="wechat-barcode"></span><a class="closing-btn" target="_self">&times;</a></div>').appendTo(e),i=t('<a class="right-app-wechat-icon"><span class="rightapp-wechat-img"></span></a>').appendTo(e);o.children("a").on("click",function(e){e.preventDefault(),o.hide()}),i.on("click",function(e){e.preventDefault(),o.show()})}t("body").append(e)}(),function(e){var o=e.b5m;o.info.isLogin=Cookies.get("ck1"),e.B5M_UC=e.B5M_UC||{},e.B5M_UC.rootPath=e.B5M_UC.rootPath||o.host.ucenter,t("#topbar .icon-home").html(""),t("#header .search-btn").click(function(){var e=t("#header .J_autofill").val(),i=e?o.host.s+"/s/Search?key="+encodeURIComponent(e)+"&type=keyword":t(".b5m-hot a:eq(0)").attr("href");location.href=i}),t("#topbar").length&&o.ui.topbar(),o.info.isLogin&&(o.ui.setRightExpCouponNum(),o.ui.setRightTotCouponNum(),t("#right-bar .right-cart").attr("target","_blank").attr("href",o.host.cart)),t(e).trigger("scroll"),o.ui.showMenu()}(e)}(window,jQuery);
;!function(i,n){b5m.namespace("ui.bdpop"),b5m.ui.bdpop=function(){"use strict"}()}(window,window.jQuery);
;!function(t){var e="_POPUP_TAO";Date.prototype.Bformat=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in e)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return t};var i={getValue:function(){var t=0,i=Cookies.get(e);if(i)for(i=i.split(","),t=0;4>t;t++)i[t]=i[t]?parseInt(i[t]):0;else for(i=[],t=0;5>t;t++)i[t]=0;return i},setValue:function(t){t=t.join(","),Cookies.set(e,t,new Date((new Date).getTime()+864e5),"/",".b5m.com")}},o={actuateLink:function(t){var e=!0;if(t.click)return void t.click();if(document.createEvent){var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),e=t.dispatchEvent(i)}if(e){var o=document.createElement("form");o.action=t.href,document.body.appendChild(o),o.submit()}},isWindows:function(){return-1!=navigator.userAgent.indexOf("Windows",0)?1:0},browser:function(){var t,e=navigator.userAgent,i=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(i[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],"IE "+(t[1]||"")):"Chrome"===i[1]&&(t=e.match(/\bOPR\/(\d+)/),null!==t)?"Opera "+t[1]:(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(t=e.match(/version\/(\d+)/i))&&i.splice(1,1,t[1]),i.join(" "))}(),browserType:function(t){var e=this;return function(){return e.browser.toLowerCase().indexOf(t)>=0}},isChrome:function(){return this.browserType("chrome")()},isIE:function(){return this.browserType("ie")()},isFirefox:function(){return this.browserType("firefox")()},isSafari:function(){return this.browserType("safari")()},track:function(){t("body").bind("click",function(t){var e=t.target?t.target:t.srcElement;t||(t=window.event),e=t.target?t.target:t.srcElement,3==e.nodeType&&(e=e.parentNode);var n=e.tagName.toLowerCase(),a=o.href(e.href);if("a"==n&&"_2b5t"!=e.id&&a&&"start_download"!=e.id){var s=i.getValue();2!=s[0]&&(s[1]=s[1]+1,s[1]>=s[2]?B5tDownload.hasB5t()||(s[0]=1,i.setValue(s)):i.setValue(s))}})},beforeByToday:function(t){var e=(new Date).getTime()-1e3*t*60*60*24,i=new Date;return i.setTime(e),i.Bformat("yyyyMMdd")},href:function(t){if(!t||-1!=t.search(/^javascript:/))return"";if(-1!=t.search(/^mailto:/))return"";if(-1!=t.search(/^\/\//))return window.location.protocol+t;if(-1!=t.search(/:\/\//))return t;if(-1!=t.search(/^\//))return window.location.origin+t;var e=window.location.href.match(/(.*\/)/)[0];return e+t}};B5tDownload={hasB5t:function(){var t=document.getElementById("b5mmain"),e=t&&"SCRIPT"==t.tagName;return e},downloadUrls:{ie:"http://dl.bangwumai.com/marketing/b5t_latest.exe",firefox:"http://cdn.b5m.cn/upload/plugin/clients/marketing/b5t_latest_firefox.xpi",safari:"http://cdn.b5m.cn/upload/plugin/clients/plugin/B5T_safari.safariextz",chrome:"https://chrome.google.com/webstore/detail/ipbgnefajhcinjdihhidjmobopgpkmob"},popup:function(){seajs.use(["arale/dialog/1.3.0/dialog","arale/dialog/1.3.0/dialog.css"],function(t){Math.round(1e4*Math.random());new t({trigger:"",content:'<span class="pop-down-tit"><a href="http://t.b5m.com/"><img src="http://staticcdn.b5m.com/images/logos/b5t.png"></a><label onclick="B5tDownload.setThreeDays(this);"><em></em>3天内不再提醒</label></span><div class="pop-down-m cf"><ul><li><span class="pop-down-pic"></span><p class="publicity-m"><span class="publicity-m-tit">全网低价 再降1元</span><span class="publicity-m-list public-list-label">汇聚来自京东、亚马逊等几乎所有电商网站的海量商品，在精准找到最低价的同时，更能再降1元，比最低价更低！</span></p></li><li><span class="pop-down-pic down-pict"></span><p class="publicity-m"><span class="publicity-m-tit">历史价格  一目了然</span><span class="publicity-m-list public-list-label">全网商品信息实时更新，客观全面的数据分析，极具针对性的价格情报，让您对每一件商品的价格历史都了如指掌！</span></p></li><li><span class="pop-down-pic down-picth"></span><p class="publicity-m"><span class="publicity-m-tit">快捷收藏  降价提醒</span><span class="publicity-m-list public-list-label">全网任何一件商品都可以轻松收藏，敏锐跟踪商品价格的每一次变化，让您不再错过任何一件喜欢商品的真正合理价！</span></p></li><li><span class="pop-down-pic down-picf"></span><p class="publicity-m"><span class="publicity-m-tit">帮钻兑换 0元购物</span><span class="publicity-m-list public-list-label">只要使用就送帮钻！您可以用帮钻兑换全网任何一家电商的任何一件商品，真正实现不花钱购物！100帮钻=1元人民币！</span></p></li></ul><div class="pop-down-but"><a href="javascript:void(0);"  target="_self" id="start_download" onclick="B5tDownload.startDownload(true,true);">立即体验</a></div></div>',className:"popup-download",width:"850px"}).show()})},beforeDownload:function(e){if(e&&(!o.isChrome()||o.isWindows())){var i=document.getElementById("_2b5t");i||t('<a id="_2b5t" style="display:none;" href="'+e+' ">2b5t</a>').appendTo("body")}},beforeDownloadForChrome:function(){t('<a id="_2b5t" style="display:none;" href="javascript:void(0);" target="_blank">2b5t</a>').appendTo("body"),t("head").append('<link rel="chrome-webstore-item" href="https://chrome.google.com/webstore/detail/ipbgnefajhcinjdihhidjmobopgpkmob"/>'),t("#_2b5t").bind("click",function(){var e=i.getValue();return e[0]=2,i.setValue(e),chrome.webstore.install("https://chrome.google.com/webstore/detail/ipbgnefajhcinjdihhidjmobopgpkmob",function(){},function(){t("#_2b5t").unbind("click.chrome")}),!1})},_directDownload:function(){var t=document.getElementById("_2b5t");o.actuateLink(t)},justDownload:function(e,i){var o=this.downloadUrls[e];"ie"==e&&i&&(o="http://cdn.b5m.cn/upload/plugin/clients/marketing/b5t_tg001_setup.exe"),o&&(this.beforeDownload(o),"chrome"==e&&this.beforeDownloadForChrome(),"firefox"==e||"safari"==e?this._directDownload():"chrome"==e?t("#_2b5t").trigger("click"):window.location.href=o)},popAndDownload:function(t){var e=this,i=this.downloadUrls[t];"ie"==t&&(i="http://cdn.b5m.cn/upload/plugin/clients/marketing/b5t_tg001_setup.exe"),i&&(this.beforeDownload(i),setTimeout(function(){e.popup()},1e3),"ie"!=t||o.isChrome()?"firefox"==t&&setTimeout(function(){e._directDownload()},300):this._directDownload())},doStatistic:function(){var t=Math.round(1e4*Math.random()),e="http://tr.bang5mai.com/web/__utm.gif?popup=b5tdownload_click&t="+t,i=document.getElementById("b5tdownload_image");i||(i=document.createElement("img"),document.body.appendChild(i),i.id="b5tdownload_image",i.style.display="none"),i.src=e},startDownload:function(e,i,n){(o.isChrome()||o.isSafari())&&setTimeout(function(){var e=t(".b5t-download-tip");e.length||(e=t('<div class="b5t-download-tip">点击下载后长时间没有反应，请点击<a class="here" href="http://t.b5m.com/download.html">这里</a><br /><a class="dl-btn" href="http://t.b5m.com/help.html">查看帮5淘安装攻略</a></div>'),t("body").append(e),e.window({title:"安装提示："})),e.window("open")},5e3),e&&this.doStatistic();var a=i?i:!1;if(o.isIE()?this.justDownload("ie",a):o.isFirefox()?this.justDownload("firefox"):o.isSafari()?this.justDownload("safari"):o.isChrome()&&(o.isWindows()?this.justDownload("ie",a):this.justDownload("chrome")),n&&!t(".b5t-download-pop").length){t("body").append('<div class="b5t-download-pop"><span><i><b>5</b> 秒后自动关闭</i><a href="javascript:;"></a></span></div>');var s=t(".b5t-download-pop");s.find("a").click(function(){s.hide()});var r=5,l=s.find("b");timer=function(){return 0===r?void s.hide():void setTimeout(function(){return r--,l.text(r),timer()},1e3)},timer()}},setThreeDays:function(e){t(e).toggleClass("cur");var o;t(e).hasClass("cur")?(o=i.getValue(),o[3]=1,i.setValue(o)):(o=i.getValue(),o[3]=0,i.setValue(o))}}}(jQuery);Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i=this.length;for(e=Number(e)||0,e=0>e?Math.ceil(e):Math.floor(e),0>e&&(e+=i);i>e;e++)if(e in this&&this[e]==t)return e;return-1}),function(t,e,a,n){function o(t){this.autofillInstance=t.autofillInstance,this.autofillContent=this.autofillInstance.autofillContent}function l(e,i,a,n){this.elem=e,this.$elem=t(e),this.elem.autocomplete="off",this.url=i||"http://bhb.b5m.com/api/autofill",this.site=a||"b5mo",this.callback=n,this.autofill=null,this.autofillContent=null,this.fillData={},this.init()}o.SEARCH_SOURCE="帮海贝",o.prototype={getData:function(t){var e=this,i=e.autofillInstance.handleKeyVal(e.autofillInstance.$elem.val());i===t&&(e.searchKeywords=t,e.prependToAutofillResult())},goodInKorea:function(t){return t&&t.code+""=="2000"},createAutofillOptionHtml:function(){var t="",e="<span>"+this.searchKeywords+'</span><span class="s-class">在<b class="s-red">'+o.SEARCH_SOURCE+"</b>内的搜索</span></span>";return t+='<a class="atf-item" target="_self" href="http://www.b5m.com/search/list?keywords='+encodeURIComponent(this.searchKeywords)+"&sources="+encodeURIComponent(o.SEARCH_SOURCE)+'" title="'+this.searchKeywords+'">'+e+"</a>"},prependToAutofillResult:function(){this.autofillContent.prepend(this.createAutofillOptionHtml())}},l.prototype={init:function(){this.createAutofill()},bindFocus:function(){var t=this;t.$elem.one("focus",function(){t.createAutofill()})},createAutofill:function(){var e=this;this.autofill=t('<div class="autofill"><div class="attr-box" style="display:none;"><h3></h3></div><div class="autofill-list"></div></div>').appendTo(a.body),this.autofillContent=this.autofill.find(".autofill-list"),this.attrBox=this.autofill.find(".attr-box"),this.bindEvent(),this.setStyle(),this.flag=!0,this.tag=!0,this.x=0,this.y=-1,this.koreaPlugin=new o({autofillInstance:e})},setStyle:function(){var t={left:this.$elem.offset().left,top:this.$elem.offset().top+this.$elem.outerHeight(),width:"504px"};this.autofill.css(t)},setSearchHistory:function(t,e,i){var a=t,e=e,n=i,o=10,l=n+"His",s=a+"-"+e+"-"+n,r=Cookies.get(l),h=this.getSiteInfo(n).domain;if(r){for(var c=r.split(";"),f=c.length,u=!0,d=0;f>d;d++){var m=c[d].split("-");m[0]==a&&m[1]==e&&(u=!1)}u&&(c.unshift(s),Cookies.set(l,c.join(";"),new Date((new Date).getTime()+2592e6),"",h+".b5m.com")),f>=o&&(c.pop(),Cookies.set(l,c.join(";"),new Date((new Date).getTime()+2592e6),"",h+".b5m.com"))}else Cookies.set(l,s,new Date((new Date).getTime()+2592e6),"",h+".b5m.com")},delSearchHistory:function(){var t=this.site+"His",e=this.autofill,i=this.getSiteInfo(this.site).domain;e.hide().find(".search-history").hide().find(".key-list").empty(),Cookies.set(t,"",new Date,"",i+".b5m.com")},getSearchHistory:function(){var t=this.site+"His",e=Cookies.get(t);if(!e)return!1;for(var i=e.split(";"),a=i.length,n="",o=0;a>o;o++){var l=i[o].split("-");n+='<li><a data-attr="1001" target="_self" title='+l[0]+" href="+l[1]+">"+l[0]+"</a></li>"}this.searchHis.append(n)},showSearchHis:function(){this.autofill.find(".search-history").show(),this.autofill.find(".autofill-box").hide()},hideSearchHis:function(){this.autofill.find(".search-history").hide(),this.autofill.find(".autofill-box").show()},bindEvent:function(){var e=this,i=e.autofill,o=null;e.$elem.on("keyup",function(t){var a=this.value,n=t.which;return 37==n||38==n||39==n||40==n?!1:(clearTimeout(o),void(o=setTimeout(function(){e.getData(a,i)},200)))}),e.$elem.on("keydown",function(i){var a=this.value,o=i.which;if(e.flag||37!=o&&38!=o&&39!=o&&40!=o||e.changeHighlight(o,a),e.flag&&40==o&&(e.changeHighlight(o,a),e.flag=!1),13==o){var l;return l=e.attrBox.find(".cur").length>0?e.attrBox.find(".cur"):e.autofillContent.find(".cur"),window.location.href=t.trim(a)?l.attr("href")==n?"http://www.b5m.com/search/list?keywords="+encodeURIComponent(e.$elem.val())+"&type=keyword":l.attr("href"):t(".b5m-hot>a")[0].href,e.hideAutoFill(),!1}}),e.$elem.on("click.af",function(t){var i=this.value,a=e.autofill,n=e.autofillContent;i&&a.is(":hidden")&&n.children().length>0?e.showAutoFill():i&&a.is(":hidden")&&0==n.children().length&&e.getData(i),!i&&Cookies.get(e.site+"His")&&(e.showAutoFill(),e.showSearchHis()),t.stopPropagation()}),i.on("mouseenter",".atf-item",function(){e.changeCurItem(t(this))}),i.on("click","a",function(){var i=t(this),a=i.text(),n=i.attr("href"),o=i.parents(".category").attr("class").split(" ")[1];e.setSearchHistory(a,n,o)}),t(a).on("click.af",function(){e.hideAutoFill()}),i.find(".J_del_His").on("click",function(){e.delSearchHistory()}),t(window).resize(function(){var t=null;clearTimeout(t),t=setTimeout(function(){e.setStyle()},400)})},changeCurItem:function(t){_this=this,_this.flag=!1,_this.tag=!0,t.addClass("cur").siblings(".atf-item").removeClass("cur")},changeTag:function(t){_this=this,_this.tag=!1,_this.attrBox.find("a").removeClass("cur"),t.addClass("cur")},changeHighlight:function(t,e){var i=this;if(t&&e){var a=37,n=38,o=39,l=40;if(1==i.flag&&40==t)return i.changeCurItem(i.autofillContent.find(".atf-item:eq(0)")),!1;if(1==i.tag&&39==t)return i.changeTag(i.attrBox.find("a:eq(0)")),!1;_elem=i.autofillContent.find(".cur"),_tag=i.attrBox.find(".cur");var s=i.attrBox.find("a").index(_tag);switch(t){case a:_tag=0>=s?_tag:i.attrBox.find("a:eq("+(s-1)+")"),i.changeTag(_tag);break;case n:_elem=_elem.prev(),i.changeCurItem(_elem);break;case o:_tag=s>=i.attrBox.find("a").length-1?_tag:i.attrBox.find("a:eq("+(s+1)+")"),i.changeTag(_tag);break;case l:_elem=_elem.next(),i.changeCurItem(_elem)}}},setInputVal:function(t){t.length&&(this.elem.value=t.find("a").text())},hideAutoFill:function(){this.autofill.hide()},showAutoFill:function(){this.setStyle(),this.autofill.show()},handleKeyVal:function(e){var i=t.trim(e);if(i){for(var a=new RegExp("[`~!@#$^&*%()=|{}':;',\\[\\].<>/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？]"),n="",o=0,l=i.length;l>o;o++)n+=i.substr(o,1).replace(a,"");return n}},getData:function(e){var i=this,a=i.handleKeyVal(e);a&&t.ajax({type:"get",url:this.url,dataType:"jsonp",data:{key:encodeURIComponent(a),searchSource:"korea"},jsonp:"jsonpCallback",success:function(t){return i.fillData=t,i.isEmptyObject(t)?(i.hideAutoFill(),void i.autofillContent.empty()):(i.fillAutoFill(t),void(t[0].source!==n&&""!==t[0].source&&i.koreaPlugin.getData(a)))}})},isEmptyObject:function(t){for(var e in t)if(t[e])return!1;return!0},fillAutoFill:function(t){var e=this,a="",o="";if(!t||0!=t.length){for(i=0;i<t.length;i++)if(t[i].cate!=n&&null!=t[i].cate)for(var l=0,s=t[0].cate.length;s>l;l++)o=t[i].term.replace(e.$elem.val(),"<span>"+e.$elem.val()+"</span>")+'<span class="s-class">在<b class="s-class-in">'+t[i].cate[l]+"</b>分类下的搜索</span>",a+=l==t[i].cate.length-1?'<a class="atf-item s-hr-dashed"':'<a class="atf-item"',a+=' target="_self" data-index="'+l+'" href="http://www.b5m.com/search/list?keywords='+encodeURIComponent(t[i].term)+"&cat="+encodeURIComponent(t[i].cate[l])+'" title="'+t[i].term+'">'+o+"</a>";else o=t[i].term.replace(e.$elem.val(),"<span>"+e.$elem.val()+"</span>"),t[i].total_count&&(a+='<a class="atf-item" target="_self" data-index="'+i+'" href="http://www.b5m.com/search/list?keywords='+encodeURIComponent(t[i].term)+'" title="'+t[i].term+'"><cite class="s-result-num">约'+t[i].total_count+"个结果</cite>"+o+"</a>");e.autofillContent.html(a),e.attrBox.empty().hide(),e.showAutoFill(),e.flag=!0}}},l.prototype.constructor=l,t.fn.autoFill=function(t,e,i){return this.each(function(){new l(this,t,e,i)})}}(jQuery,window,document);